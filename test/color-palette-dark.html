<!DOCTYPE html>
<link rel="stylesheet" href="css/github-dark.css">
<style>
  body {
    font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
    font-size: 12px;
    background-color: #20272b;
    color: #ddd;
  }
</style>
<body>

<table>
  <tr>
    <td>normal</td>
  </tr>
</table>

<script>
  const BACKGROUNDS = ["normal"];

  const table = document.getElementsByTagName("table")[0];
  const rules = document.styleSheets[0].cssRules;

  for (var i = 0; i < rules.length; ++i) {
    // Take the shortest selector.
    var selectors = rules[i].selectorText.split(", ");
    var selector = selectors.sort(function(a, b) { return a.length - b.length; })[0];

    // Build up a nested <span> corresponding to the classes in the selector.
    var classes = selector.split(" ").map(function(s) { return s.slice(1); }).reverse();
    var span = classes.reduce(function(child, className) {
      var span = document.createElement("span");
      span.className = className;
      span.textContent = "." + className + " ";
      if (child)
        span.appendChild(child);
      return span;
    }, null);

    // Add a row for this selector, with one cell for each background style.
    var row = document.createElement("tr");
    BACKGROUNDS.forEach(function(className) {
      const cell = document.createElement("td");
      cell.className = className;
      cell.appendChild(span.cloneNode(true));
      row.appendChild(cell);
    });
    table.appendChild(row);
  }
</script>
