<!DOCTYPE html>
<link rel="stylesheet" href="css/github-light.css">
<style>
  body {
    font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
    font-size: 12px;
  }

  .red1   { background-color: #ffecec; }
  .red2   { background-color: #f8cbcb; }
  .green1 { background-color: #eaffea; }
  .green2 { background-color: #a6f3a6; }
</style>
<body>

<table>
</table>

<script>
  const BACKGROUNDS = ["normal", "red1", "red2", "green1", "green2"];

  const table = document.getElementsByTagName("table")[0];
  const rules = document.styleSheets[0].cssRules;

  for (var i = 0; i < rules.length; ++i) {
    // Take the shortest selector.
    var selectors = rules[i].selectorText.split(", ");
    var selector = selectors.sort(function(a, b) { return a.length - b.length; })[0];

    // Build up a nested <span> corresponding to the classes in the selector.
    var classes = selector.split(" ").map(function(s) { return s.slice(1); }).reverse();
    var span = classes.reduce(function(child, className) {
      var span = document.createElement("span");
      span.className = className;
      span.textContent = "." + className + " ";
      if (child)
        span.appendChild(child);
      return span;
    }, null);

    // Add a row for this selector, with one cell for each background style.
    var row = document.createElement("tr");
    BACKGROUNDS.forEach(function(className) {
      const cell = document.createElement("td");
      cell.className = className;
      cell.appendChild(span.cloneNode(true));
      row.appendChild(cell);
    });
    table.appendChild(row);
  }
</script>
